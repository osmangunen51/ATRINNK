@using NeoSistem.Trinnk.Web.Models;
@using NeoSistem.Trinnk.Web.Models.ViewModels;
@model PacketModel
@{ Layout = "~/Views/Shared/_LayoutAccountMaster.cshtml"; }
@section HeaderContent
{
    <script type="text/javascript">
        function twoStepCheck() {
            if ($('#chkNewAddress').attr('checked') == false) {
                if ($('#TaxOffice').val() == '' || $('#TaxNo').val() == '') {
                    alert('Bir sonraki adıma geçmek vergi dairesi ve vergi numarası alanlarını eksiksiz girmelisiniz.');
                    return false;
                }
                else if ($('#Address').val() == '') {
                    alert('Yeni fatura adresini doldurmalısınız.');
                    return false;
                }
                else {
                    return true;
                }
            }
            else {
                if ($('#TaxOffice').val() == '' || $('#TaxNo').val() == '') {
                    alert('Bir sonraki adıma geçmek için vergi dairesi ve vergi numarası alanlarını eksiksiz girmelisiniz.');
                    return false;
                }
                else {
                    return true;
                }
            }
        }

        $(document).ready(function () {
            $('#chkNewAddress').change(function () {
                if ($(this).is(":checked")) {
                    $('#Address').attr('disabled', 'disabled');
                    $('#Address').css('background-color', '#ccc');
                }
                else {
                    $('#Address').removeAttr('disabled');
                    $('#Address').css('background-color', '#fff');
                }
            });
        });
    </script>
}
<input type="hidden" id="hdnKrediKarti" value="@Ordertype.KrediKarti" />
<input type="hidden" id="hdnHavale" value="@Ordertype.Havale" />
@using (Html.BeginForm("ThreeStep", "MembershipSales", FormMethod.Post))
{
<div>
    <div>
        @{Html.RenderPartial("_TaxAndAddressForm", Model.TaxAndAddressViewModel);}
        <hr />
        <div class="row">
            <div class="col-sm-12">
                <div class="btn-group">
                    <span class="btn btn-md btn-mt2 disabled">Ödeme Tipi </span>
                    <a href="#divBankTransfer" data-toggle="tab"
                       class="btn btn-md btn-mt2 active">Havale / EFT </a>
                    <a href="#kredikarti" data-toggle="tab" class="btn btn-md btn-mt2">Kredi Kartı </a>
                </div>
                <hr>
                <h5>
                    <span class="glyphicon glyphicon-tag"></span>&nbsp; Sipariş Bilgileri
                </h5>
                <table class="table table-striped">
                    <tbody>
                        <tr>
                            <td>
                                Sipariş No
                            </td>
                            <td>
                                Paket Tipi
                            </td>
                            <td>
                                Tutar
                            </td>
                            <td>
                                Kdv
                            </td>
                            <td>
                                <b>Toplam Tutar </b>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                @Model.OrderNo
                            </td>
                            <td>
                                @Model.PacketName
                            </td>
                            <td>
                                @{ decimal priceWithoutKdv = Model.OrderPrice / (decimal) 1.18;
                                    }
                                @priceWithoutKdv.ToString("C2")
                            </td>
                            <td>
                                @Html.Raw((Model.OrderPrice - priceWithoutKdv).ToString("C2"))
                            </td>
                            <td>
                                <b>
                                    @Model.MaturityCalculation(Model.OrderPrice, 0).ToString("C2")
                                </b>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <hr>
                <div class="tab-content">
                    <div class="tab-pane active" id="divBankTransfer">
                        @{Html.RenderPartial("BankTransfer");}
                        <button type="submit" onclick="return ThreeStepCheck();" class="pull-right btn btn-primary">
                            Tamamla >>
                        </button>
                    </div>
                    <div class="tab-pane" id="kredikarti">

                        <button type="submit" onclick="return ThreeStepCheck();" class="pull-right btn btn-primary">
                            Sonraki Adım >>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
                <input type="hidden" name="hasRecord" value="true" />
                                <input type="hidden" id="OrderType" name="OrderType" value="@Ordertype.Havale" />
                                                <input type="hidden" id="CreditCardInstallmentId" name="CreditCardInstallmentId" />
                                                                <input type="hidden" id="CreditCardId" name="CreditCardId" value="" />
                                                                                <input type="hidden" name="AccountId" id="AccountId" />
                                                                                                <input type="hidden" name="rdPaymentOption" id="rdTekCekim" />
                                                                                                                <input type="hidden" name="rdPaymentOption" id="rdTaksit" />
                                                                                                                                <input type="hidden" checked="checked" name="rdOrderType" id="rdBankTransfer" />}