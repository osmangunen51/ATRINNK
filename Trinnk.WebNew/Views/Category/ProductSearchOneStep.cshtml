@model MTCategorySearchModel
@using NeoSistem.Trinnk.Web.Areas.Account.Models
@using NeoSistem.Trinnk.Web.Models
@using Trinnk.Core
@using NeoSistem.Trinnk.Core.Web.Helpers
@using NeoSistem.Trinnk.Web.Helpers
@using System.Diagnostics
@using NeoSistem.Trinnk.Web.Models.Home
@using NeoSistem.Trinnk.Web.Models.MemberShip
@using NeoSistem.Trinnk.Web.Models.Authentication
@using Trinnk.Entities.Tables.Members
@using NeoSistem.Trinnk.Web.Models.ViewModels
@using NeoSistem.Trinnk.Web.Models.Products
@using NeoSistem.Trinnk.Web.Models.Catalog
@using NeoSistem.Trinnk.Web.Models.Entities
@using NeoSistem.Trinnk.Web.Models.ProductRequests
@using NeoSistem.Trinnk.Web.Models.Stores
@using NeoSistem.Trinnk.Core.Web
@using NeoSistem.Trinnk.Web.Models.StoreNews
@using System.Globalization
@using NeoSistem.Trinnk.Web.Models.StoreProfiles
@using NeoSistem.Trinnk.Web.Models.Videos
@using NeoSistem.Trinnk.Web.Models.Adverts
@using Trinnk.Entities.Tables.Catalog
@using NeoSistem.Trinnk.Web.Areas.Account.Models.Advert
@using NeoSistem.Trinnk.Web.Areas.Account.Models.FavoriteProducts
@using NeoSistem.Trinnk.Web.Areas.Account.Models.Checkouts
@using NeoSistem.Trinnk.Web.Areas.Account.Models.OtherSettings
@using NeoSistem.Trinnk.Web.Areas.Account.Constants

@{
    //Layout = "~/Views/Shared/_LayoutAccountMaster.cshtml";
    Layout = "~/Views/Shared/_LayoutMainMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutStoreProfileMaster.cshtml";


}

@section headercontent{
    <meta name="robots" content="noindex, nofollow" />
}


<div class="col-md-12">
    @if (Request.QueryString["SearchText"] != null && Request.QueryString["SearchText"].ToString().Length < 3)
    {
        <div class="row">
            <div class="col-md-12 search-no-result-container">
                <div class="col-md-6 message">
                    <img src="../../Content/V2/images/not-found.png" />
                    <p class="message-text">
                        "<b>@Request.QueryString["SearchText"].ToString()</b>" ile ilgili sonuç bulunamamıştır.
                    </p>
                    <div>
                        Arama yapabilmek için en az 3 karakter girmelisiniz kelimenizi arttırabilir veya <a href="@AppSettings.SiteAllCategoryUrl">tüm ürünler</a> sayfamıza bakabilirsiniz.
                    </div>

                </div>
            </div>
        </div>

    }
    else
    {
        if (Model.CategoryModel.TopCategoryItemModels.ToList().Count > 0)
        {
            <div class="result-category">
                <h4>"@Model.SearchText" aramanızda <b style="color: #bf0a0a">"@Model.TotalCount"</b> ilan bulundu </h4>
                <div class="small">Aşağıdaki linklerden arama sonuçlarına ulaşabilirsiniz</div>
                @foreach (var item in Model.CategoryModel.TopCategoryItemModels.ToList().OrderBy(s => s.CategoryName))
                {
                    <div class="col-md-4 col-sm-6 result-category__item searchResultCategory">
                        @*<img class="result-category__img" src="@item.CategoryIcon" />*@
                        <p class="result-category__category-name"><a href="@item.CategoryUrl">@item.CategoryName &nbsp<b style="color: #808080">(@item.ProductCount)</b></a></p>
                        <ul class="subCategory" id="subCategory@(item.CategoryId )">
                            @foreach (var subCategory in Model.CategoryModel.SubCategories.Where(c => c.CategoryParentId == item.CategoryId).OrderBy(x => x.CategoryName))
                            {
                                <li><a href="@subCategory.CategoryUrl">@subCategory.CategoryName &nbsp<small style="color: #808080">(@subCategory.ProductCount)</small></a></li>
                            }
                            @if (Model.CategoryModel.SubCategories.Where(x => x.CategoryParentId == item.CategoryId).ToList().Count > 5)
                            {
                                <li class="showAllSub" id="showAllSub@(item.CategoryId )"><b>Tümünü Gör</b><span class="icon-fill-down-arrow" aria-hidden="true"></span></li>
                            }
                        </ul>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="row">
                <div class="col-md-12 search-no-result-container">
                    <div class="col-md-6 message">
                        <img src="../../Content/V2/images/not-found.png" />
                        <p class="message-text">
                            "<b>@Model.SearchText</b>" ile ilgili sonuç bulunamamıştır.
                        </p>
                        <div>
                            Arama kelimenizi değiştirebilir veya <a href="@AppSettings.SiteAllCategoryUrl">tüm ürünler</a> sayfamıza bakabilirsiniz.
                        </div>

                    </div>
                </div>
            </div>

        }
    }
</div>
