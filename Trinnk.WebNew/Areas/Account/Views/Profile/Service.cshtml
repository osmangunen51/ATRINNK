@model StoreModel
@using NeoSistem.Trinnk.Web.Areas.Account.Models
@using NeoSistem.Trinnk.Web.Models

@using NeoSistem.Trinnk.Core.Web.Helpers
@using NeoSistem.Trinnk.Web.Helpers
@using System.Diagnostics
@using NeoSistem.Trinnk.Web.Models.Home
@using NeoSistem.Trinnk.Web.Models.MemberShip
@using NeoSistem.Trinnk.Web.Models.Authentication
@using Trinnk.Entities.Tables.Members
@using NeoSistem.Trinnk.Web.Models.ViewModels
@using NeoSistem.Trinnk.Web.Models.Products
@using NeoSistem.Trinnk.Web.Models.Catalog
@using NeoSistem.Trinnk.Web.Models.Entities
@using NeoSistem.Trinnk.Web.Models.ProductRequests
@using NeoSistem.Trinnk.Web.Models.Stores
@using NeoSistem.Trinnk.Core.Web
@using NeoSistem.Trinnk.Web.Models.StoreNews
@using System.Globalization
@using NeoSistem.Trinnk.Web.Models.StoreProfiles
@using NeoSistem.Trinnk.Web.Models.Videos
@using NeoSistem.Trinnk.Web.Models.Adverts
@using Trinnk.Entities.Tables.Catalog
@using NeoSistem.Trinnk.Web.Areas.Account.Models.Advert
@using NeoSistem.Trinnk.Web.Areas.Account.Models.FavoriteProducts
@using NeoSistem.Trinnk.Web.Areas.Account.Models.Checkouts
@using NeoSistem.Trinnk.Web.Areas.Account.Models.OtherSettings
@using NeoSistem.Trinnk.Web.Areas.Account.Constants

@{
    Layout = null;
}

<script type="text/javascript">
    function DealerAddForService() {
        $.ajax({
            url: '/Profile/DealerAddForService',
            type: 'post',
            dataType: 'json',
            data: { DealerNameForService: $('#DealerNameForService').val() },
            success: function (data) {
                $('#DealerNameForService').val('');

                var dealerItems = eval(data);

                $("#StoreDealerId").empty();

                $("#StoreDealerId").append("<option value=\"0\">" + "< Lütfen Seçiniz >" + "</option>");
                for (var i = 0; i < dealerItems.length; i++) {
                    $("#StoreDealerId").append("<option value=\"" + dealerItems[i].StoreDealerId + "\">" + dealerItems[i].DealerName + "</option>");
                }

                alert('Yetkili Servisiniz başarıyla eklenmiştir.');
            },
            error: function (x, l, e) {
                alert(x.responseText);
            }
        });
    }

    function checkForm() {
        if ($('#StoreDealerId').val() == '0') {
            alert('Ekleyeceğiniz adresin yetkili servisini seçin.');
            return false;
        }
        else {
            return true;
        }
    }
</script>
<input type="hidden" id="hdnDealerType" value="@Request.QueryString["DealerType"]" />
<div class="col-md-7">
    <div class="form-horizontal" role="form">
        <div class="form-group">
            <label class="col-sm-3 control-label">
                Servis Adı
            </label>
            <div class="col-sm-9">
                <div class="input-group">
                    @Html.TextBox("DealerNameForService", null, new { @class = "form-control" })
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" onclick="DealerAddForService();">
                            Ekle
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <div class="form-horizontal" role="form">
        <div class="form-group">
            <label class="col-sm-3 control-label">
                Servis Seç
            </label>
            <div class="col-sm-7">
                @Html.DropDownList("StoreDealerId", Model.DealerItemsForService,
                new Dictionary<string, object> { { "class", "form-control" }, { "data-validation-engine", "validate[funcCall[ifSelectNotEmpty]]" } })
            </div>
        </div>
        <div class="form-group">
            @Html.Partial("Address")
        </div>
        <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9">
                <button type="submit" class="btn btn-primary" onclick="return checkForm();">
                    Değişiklikleri Kaydet
                </button>
            </div>
        </div>
    </div>
</div>
<div class="col-md-offset-1 col-md-4">
    @Html.Partial("DealerAddressItems", Model.DealerAddressItems)
</div>
