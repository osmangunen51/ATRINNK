@model FavoriteProductViewModel
@using NeoSistem.Trinnk.Web.Areas.Account.Models
@using NeoSistem.Trinnk.Web.Models

@using NeoSistem.Trinnk.Core.Web.Helpers
@using NeoSistem.Trinnk.Web.Helpers
@using System.Diagnostics
@using NeoSistem.Trinnk.Web.Models.Home
@using NeoSistem.Trinnk.Web.Models.MemberShip
@using NeoSistem.Trinnk.Web.Models.Authentication
@using Trinnk.Entities.Tables.Members
@using NeoSistem.Trinnk.Web.Models.ViewModels
@using NeoSistem.Trinnk.Web.Models.Products
@using NeoSistem.Trinnk.Web.Models.Catalog
@using NeoSistem.Trinnk.Web.Models.Entities
@using NeoSistem.Trinnk.Web.Models.ProductRequests
@using NeoSistem.Trinnk.Web.Models.Stores
@using NeoSistem.Trinnk.Core.Web
@using NeoSistem.Trinnk.Web.Models.StoreNews
@using System.Globalization
@using NeoSistem.Trinnk.Web.Models.StoreProfiles
@using NeoSistem.Trinnk.Web.Models.Videos
@using NeoSistem.Trinnk.Web.Models.Adverts
@using Trinnk.Entities.Tables.Catalog
@using NeoSistem.Trinnk.Web.Areas.Account.Models.Advert
@using NeoSistem.Trinnk.Web.Areas.Account.Models.FavoriteProducts
@{
    Layout = "~/Views/Shared/_LayoutAccountMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutMainMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutStoreProfileMaster.cshtml";


}


@section headercontent{

    <script type="text/javascript">
        $(window).scroll(function () {
            var requestScroll = $("#RequestScrool").val();

            if ($(window).scrollTop() + $(window).height() == $(document).height()) {
                setTimeout(
                    function () {
                        //do something special
                    }, 3000);
                if (requestScroll == 1) {
                    $.ajax({

                        url: '/Account/Favorite/GetFavoriteProducts',
                        type: 'GET',
                        data: {
                            'page': $("#Page").val(),
                            'pageDimension': 3
                        },
                        dataType: 'json',
                        success: function (data) {
                            if (data.IsSuccess) {

                                $("#content-products").append(data.Result);
                                var page = Number($("#Page").val()) + 1;

                                $("#Page").val(page);
                                console.log("requested", page);
                            }
                            else {
                                $("#RequestScrool").val("0");
                            }
                        },
                        error: function (request, error) {

                        }
                    });
                }
            }

        });
    </script>
}


<div class="row">
    <div class="col-sm-12 col-md-12 store-panel-menu-header" style="">
        @Html.Partial("LeftMenu", Model.LeftMenuModel)
    </div>
    <div class="col-md-12">
        <h4 class="mt0 text-info">
            Favori İlanlarım
        </h4>
    </div>
</div>
<div class="row">

    <div class="col-sm-12 col-md-12">

        <div>
            <div class="row m5" id="content-products">
                @Html.Hidden("Page", 2)
                @Html.Hidden("RequestScrool", 1)
                @foreach (var item in Model.MTCategoryProductModels.Source)
                {
                    <div class="col-md-3 col-lg-3">
                        @Html.Partial("_ProductItemBox", item)
                    </div>
                }
            </div>
        </div>
    </div>
</div>
