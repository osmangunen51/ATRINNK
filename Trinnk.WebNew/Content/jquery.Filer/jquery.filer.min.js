/*!
 * jQuery.filer
 * Copyright (c) 2016 CreativeDream
 * Website: https://github.com/CreativeDream/jquery.filer
 * Version: 1.3 (14-Sep-2016)
 * Requires: jQuery v1.7.1 or later
 */
(function(n){"use strict";n.fn.filer=function(t){return this.each(function(i,r){var e=n(r),a=".jFiler",s=n(),o=n(),h=n(),c=[],l=n.isFunction(t)?t(e,n.fn.filer.defaults):t,f=l&&n.isPlainObject(l)?n.extend(!0,{},n.fn.filer.defaults,l):n.fn.filer.defaults,u={init:function(){e.wrap('<div class="jFiler"><\/div>');u._set("props");e.prop("jFiler").boxEl=s=e.closest(a);u._changeInput()},_bindInput:function(){if(f.changeInput&&o.length>0)o.on("click",u._clickHandler);e.on({focus:function(){o.addClass("focused")},blur:function(){o.removeClass("focused")},change:u._onChange});if(f.dragDrop){f.dragDrop.dragContainer.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault();n.stopPropagation()});f.dragDrop.dragContainer.on("drop",u._dragDrop.drop);f.dragDrop.dragContainer.on("dragover",u._dragDrop.dragEnter);f.dragDrop.dragContainer.on("dragleave",u._dragDrop.dragLeave)}if(f.uploadFile&&f.clipBoardPaste)n(window).on("paste",u._clipboardPaste)},_unbindInput:function(t){f.changeInput&&o.length>0&&o.off("click",u._clickHandler);t&&(e.off("change",u._onChange),f.dragDrop&&(f.dragDrop.dragContainer.off("drop",u._dragDrop.drop),f.dragDrop.dragContainer.off("dragover",u._dragDrop.dragEnter),f.dragDrop.dragContainer.off("dragleave",u._dragDrop.dragLeave)),f.uploadFile&&f.clipBoardPaste&&n(window).off("paste",u._clipboardPaste))},_clickHandler:function(){if(!f.uploadFile&&f.addMore&&e.val().length!=0){u._unbindInput(!0);var t=n('<input type="file" />'),i=e.prop("attributes");n.each(i,function(){this.name!="required"&&t.attr(this.name,this.value)});e.after(t);c.push(t);e=t;u._bindInput();u._set("props")}e.click()},_applyAttrSettings:function(){var t=["name","limit","maxSize","fileMaxSize","extensions","changeInput","showThumbs","appendTo","theme","addMore","excludeName","files","uploadUrl","uploadData","options"],i,n;for(i in t)if(n="data-jfiler-"+t[i],u._assets.hasAttr(n)){switch(t[i]){case"changeInput":case"showThumbs":case"addMore":f[t[i]]=["true","false"].indexOf(e.attr(n))>-1?e.attr(n)=="true":e.attr(n);break;case"extensions":f[t[i]]=e.attr(n).replace(/ /g,"").split(",");break;case"uploadUrl":f.uploadFile&&(f.uploadFile.url=e.attr(n));break;case"uploadData":f.uploadFile&&(f.uploadFile.data=JSON.parse(e.attr(n)));break;case"files":case"options":f[t[i]]=JSON.parse(e.attr(n));break;default:f[t[i]]=e.attr(n)}e.removeAttr(n)}},_changeInput:function(){if(u._applyAttrSettings(),f.beforeRender!=null&&typeof f.beforeRender=="function"?f.beforeRender(s,e):null,f.theme&&s.addClass("jFiler-theme-"+f.theme),e.get(0).tagName.toLowerCase()!="input"&&e.get(0).type!="file")o=e,e=n('<input type="file" name="'+f.name+'" />'),e.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"}),s.prepend(e),u._isGn=e;else if(f.changeInput){switch(typeof f.changeInput){case"boolean":o=n('<div class="jFiler-input"><div class="jFiler-input-caption"><span>'+f.captions.feedback+'<\/span><\/div><div class="jFiler-input-button">'+f.captions.button+'<\/div><\/div>"');break;case"string":case"object":o=n(f.changeInput);break;case"function":o=n(f.changeInput(s,e,f))}e.after(o);e.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"})}e.prop("jFiler").newInputEl=o;f.dragDrop&&(f.dragDrop.dragContainer=f.dragDrop.dragContainer?n(f.dragDrop.dragContainer):o);(!f.limit||f.limit&&f.limit>=2)&&(e.attr("multiple","multiple"),e.attr("name").slice(-2)!="[]"?e.attr("name",e.attr("name")+"[]"):null);e.attr("disabled")||f.disabled?(f.disabled=!0,u._unbindInput(!0),s.addClass("jFiler-disabled")):(f.disabled=!1,u._bindInput(),s.removeClass("jFiler-disabled"));f.files&&u._append(!1,{files:f.files});f.afterRender!=null&&typeof f.afterRender=="function"?f.afterRender(h,s,o,e):null},_clear:function(){u.files=null;e.prop("jFiler").files=null;f.uploadFile||f.addMore||u._reset();u._set("feedback",u._itFl&&u._itFl.length>0?u._itFl.length+" "+f.captions.feedback2:f.captions.feedback);f.onEmpty!=null&&typeof f.onEmpty=="function"?f.onEmpty(s,o,e):null},_reset:function(t){if(!t){if(!f.uploadFile&&f.addMore){for(var i=0;i<c.length;i++)c[i].remove();c=[];u._unbindInput(!0);e=u._isGn?u._isGn:n(r);u._bindInput()}u._set("input","")}u._itFl=[];u._itFc=null;u._ajFc=0;u._set("props");e.prop("jFiler").files_list=u._itFl;e.prop("jFiler").current_file=u._itFc;u._itFr=[];s.find("input[name^='jfiler-items-exclude-']:hidden").remove();h.fadeOut("fast",function(){n(this).remove()});e.prop("jFiler").listEl=h=n()},_set:function(n,t){switch(n){case"input":e.val(t);break;case"feedback":o.length>0&&o.find(".jFiler-input-caption span").html(t);break;case"props":e.prop("jFiler")||e.prop("jFiler",{options:f,listEl:h,boxEl:s,newInputEl:o,inputEl:e,files:u.files,files_list:u._itFl,current_file:u._itFc,append:function(n){return u._append(!1,{files:[n]})},enable:function(){f.disabled&&(f.disabled=!1,e.removeAttr("disabled"),s.removeClass("jFiler-disabled"),u._bindInput())},disable:function(){f.disabled||(f.disabled=!0,s.addClass("jFiler-disabled"),u._unbindInput(!0))},remove:function(n){return u._remove(null,{binded:!0,data:{id:n}}),!0},reset:function(){return u._reset(),u._clear(),!0},retry:function(n){return u._retryUpload(n)}})}},_filesCheck:function(){var e=0,i,r;if(f.limit&&u.files.length+u._itFl.length>f.limit)return f.dialogs.alert(u._assets.textParse(f.captions.errors.filesLimit)),!1;for(i=0;i<u.files.length;i++){var t=u.files[i],o=t.name.split(".").pop().toLowerCase(),r={name:t.name,size:t.size,size2:u._assets.bytesToSize(t.size),type:t.type,ext:o};if(f.extensions!=null&&n.inArray(o,f.extensions)==-1&&n.inArray(r.type,f.extensions)==-1)return f.dialogs.alert(u._assets.textParse(f.captions.errors.filesType,r)),!1;if(f.maxSize!=null&&u.files[i].size>f.maxSize*1048576||f.fileMaxSize!=null&&u.files[i].size>f.fileMaxSize*1048576)return f.dialogs.alert(u._assets.textParse(f.captions.errors.filesSize,r)),!1;if(t.size==4096&&t.type.length==0)return f.dialogs.alert(u._assets.textParse(f.captions.errors.folderUpload,r)),!1;if(f.onFileCheck!=null&&typeof f.onFileCheck=="function"?f.onFileCheck(r,f,u._assets.textParse)===!1:null)return!1;if((f.uploadFile||f.addMore)&&!f.allowDuplicates&&(r=u._itFl.filter(function(n){if(n.file.name==t.name&&n.file.size==t.size&&n.file.type==t.type&&(t.lastModified?n.file.lastModified==t.lastModified:!0))return!0}),r.length>0)){if(u.files.length==1)return!1;t._pendRemove=!0}e+=u.files[i].size}return f.maxSize!=null&&e>=Math.round(f.maxSize*1048576)?(f.dialogs.alert(u._assets.textParse(f.captions.errors.filesSizeAll)),!1):!0},_thumbCreator:{create:function(t){var i=u.files[t],o=u._itFc?u._itFc.id:t,s=i.name,a=i.size,v=i.file,c=i.type?i.type.split("/",1):"".toString().toLowerCase(),l=s.indexOf(".")!=-1?s.split(".").pop().toLowerCase():"",y=f.uploadFile?'<div class="jFiler-jProgressBar">'+f.templates.progressBar+"<\/div>":"",e={id:o,name:s,size:a,size2:u._assets.bytesToSize(a),url:v,type:c,extension:l,icon:u._assets.getIcon(l,c),icon2:u._thumbCreator.generateIcon({type:c,extension:l}),image:'<div class="jFiler-item-thumb-image fi-loading"><\/div>',progressBar:y,_appended:i._appended},r="";if(i.opts&&(e=n.extend({},i.opts,e)),r=n(u._thumbCreator.renderContent(e)).attr("data-jfiler-index",o),r.get(0).jfiler_id=o,u._thumbCreator.renderFile(i,r,e),i.forList)return r;u._itFc.html=r;r.hide()[f.templates.itemAppendToEnd?"appendTo":"prependTo"](h.find(f.templates._selectors.list)).show();i._appended||u._onSelect(t)},renderContent:function(n){return u._assets.textParse(n._appended?f.templates.itemAppend:f.templates.item,n)},renderFile:function(t,i,r){var s,e,o;if(i.find(".jFiler-item-thumb-image").length==0)return!1;if(t.file&&r.type=="image")return e='<img src="'+t.file+'" draggable="false" />',o=i.find(".jFiler-item-thumb-image.fi-loading"),n(e).error(function(){e=u._thumbCreator.generateIcon(r);i.addClass("jFiler-no-thumbnail");o.removeClass("fi-loading").html(e)}).load(function(){o.removeClass("fi-loading").html(e)}),!0;window.File&&window.FileList&&window.FileReader&&r.type=="image"&&r.size<1e7?(s=new FileReader,s.onload=function(n){var o=i.find(".jFiler-item-thumb-image.fi-loading");if(f.templates.canvasImage){var e=document.createElement("canvas"),s=e.getContext("2d"),t=new Image;t.onload=function(){var u=o.height(),f=o.width(),h=t.height/u,c=t.width/f,l=h<c?h:c,y=t.height/l,r=t.width/l,p=Math.ceil(Math.log(t.width/r)/Math.log(2)),a,v,n,i;e.height=u;e.width=f;t.width<e.width||t.height<e.height||p<=1?(a=t.width<e.width?e.width/2-t.width/2:t.width>e.width?-(t.width-e.width)/2:0,v=t.height<e.height?e.height/2-t.height/2:0,s.drawImage(t,a,v,t.width,t.height)):(n=document.createElement("canvas"),i=n.getContext("2d"),n.width=t.width*.5,n.height=t.height*.5,i.fillStyle="#fff",i.fillRect(0,0,n.width,n.height),i.drawImage(t,0,0,n.width,n.height),i.drawImage(n,0,0,n.width*.5,n.height*.5),s.drawImage(n,r>e.width?r-e.width:0,0,n.width*.5,n.height*.5,0,0,r,y));o.removeClass("fi-loading").html('<img src="'+e.toDataURL("image/png")+'" draggable="false" />')};t.onerror=function(){i.addClass("jFiler-no-thumbnail");o.removeClass("fi-loading").html(u._thumbCreator.generateIcon(r))};t.src=n.target.result}else o.removeClass("fi-loading").html('<img src="'+n.target.result+'" draggable="false" />')},s.readAsDataURL(t)):(e=u._thumbCreator.generateIcon(r),o=i.find(".jFiler-item-thumb-image.fi-loading"),i.addClass("jFiler-no-thumbnail"),o.removeClass("fi-loading").html(e))},generateIcon:function(t){var i=new Array(3),r,e,f;if(t&&t.type&&t.type[0]&&t.extension)switch(t.type[0]){case"image":i[0]="f-image";i[1]='<i class="icon-jfi-file-image"><\/i>';break;case"video":i[0]="f-video";i[1]='<i class="icon-jfi-file-video"><\/i>';break;case"audio":i[0]="f-audio";i[1]='<i class="icon-jfi-file-audio"><\/i>';break;default:i[0]="f-file f-file-ext-"+t.extension;i[1]=t.extension.length>0?"."+t.extension:"";i[2]=1}else i[0]="f-file",i[1]=t.extension&&t.extension.length>0?"."+t.extension:"",i[2]=1;return r='<span class="jFiler-icon-file '+i[0]+'">'+i[1]+"<\/span>",i[2]==1&&(e=u._assets.text2Color(t.extension),e&&(f=n(r).appendTo("body"),f.css("background-color",u._assets.text2Color(t.extension)),r=f.prop("outerHTML"),f.remove())),r},_box:function(t){var r,i;if(f.beforeShow!=null&&typeof f.beforeShow=="function"?!f.beforeShow(u.files,h,s,o,e):!1)return!1;if(h.length<1){r=f.appendTo?n(f.appendTo):s;r.find(".jFiler-items").remove();h=n('<div class="jFiler-items jFiler-row"><\/div>');e.prop("jFiler").listEl=h;h.append(u._assets.textParse(f.templates.box)).appendTo(r);h.on("click",f.templates._selectors.remove,function(i){i.preventDefault();var r=[t?t.remove.event:i,t?t.remove.el:n(this).closest(f.templates._selectors.item)],e=function(){u._remove(r[0],r[1])};f.templates.removeConfirmation?f.dialogs.confirm(f.captions.removeConfirmation,e):e()})}for(i=0;i<u.files.length;i++)u.files[i]._appended||(u.files[i]._choosed=!0),u._addToMemory(i),u._thumbCreator.create(i)}},_upload:function(t){var i=u._itFl[t],s=i.html,r=new FormData,o;if(r.append(e.attr("name"),i.file,i.file.name?i.file.name:!1),f.uploadFile.data!=null&&n.isPlainObject(typeof f.uploadFile.data=="function"?f.uploadFile.data(i.file):f.uploadFile.data))for(o in f.uploadFile.data)r.append(o,f.uploadFile.data[o]);u._ajax.send(s,r,i)},_ajax:{send:function(t,i,r){return r.ajax=n.ajax({url:f.uploadFile.url,data:i,type:f.uploadFile.type,enctype:f.uploadFile.enctype,xhr:function(){var i=n.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(n){u._ajax.progressHandling(n,t)},!1),i},complete:function(n,t){r.ajax=!1;u._ajFc++;f.uploadFile.synchron&&r.id+1<u._itFl.length&&u._upload(r.id+1);u._ajFc>=u.files.length&&(u._ajFc=0,e.get(0).value="",f.uploadFile.onComplete!=null&&typeof f.uploadFile.onComplete=="function"?f.uploadFile.onComplete(h,s,o,e,n,t):null)},beforeSend:function(n,i){return f.uploadFile.beforeSend!=null&&typeof f.uploadFile.beforeSend=="function"?f.uploadFile.beforeSend(t,h,s,o,e,r.id,n,i):!0},success:function(n,i,u){r.uploaded=!0;f.uploadFile.success!=null&&typeof f.uploadFile.success=="function"?f.uploadFile.success(n,t,h,s,o,e,r.id,i,u):null},error:function(n,i,u){r.uploaded=!1;f.uploadFile.error!=null&&typeof f.uploadFile.error=="function"?f.uploadFile.error(t,h,s,o,e,r.id,n,i,u):null},statusCode:f.uploadFile.statusCode,cache:!1,contentType:!1,processData:!1}),r.ajax},progressHandling:function(n,t){if(n.lengthComputable){var i=Math.round(n.loaded*100/n.total).toString();f.uploadFile.onProgress!=null&&typeof f.uploadFile.onProgress=="function"?f.uploadFile.onProgress(i,t,h,s,o,e):null;t.find(".jFiler-jProgressBar").find(f.templates._selectors.progressBar).css("width",i+"%")}}},_dragDrop:{dragEnter:function(n){clearTimeout(u._dragDrop._drt);f.dragDrop.dragContainer.addClass("dragged");u._set("feedback",f.captions.drop);f.dragDrop.dragEnter!=null&&typeof f.dragDrop.dragEnter=="function"?f.dragDrop.dragEnter(n,o,e,s):null},dragLeave:function(n){clearTimeout(u._dragDrop._drt);u._dragDrop._drt=setTimeout(function(n){if(!u._dragDrop._dragLeaveCheck(n))return u._dragDrop.dragLeave(n),!1;f.dragDrop.dragContainer.removeClass("dragged");u._set("feedback",f.captions.feedback);f.dragDrop.dragLeave!=null&&typeof f.dragDrop.dragLeave=="function"?f.dragDrop.dragLeave(n,o,e,s):null},100,n)},drop:function(n){clearTimeout(u._dragDrop._drt);f.dragDrop.dragContainer.removeClass("dragged");u._set("feedback",f.captions.feedback);n&&n.originalEvent&&n.originalEvent.dataTransfer&&n.originalEvent.dataTransfer.files&&n.originalEvent.dataTransfer.files.length>0&&u._onChange(n,n.originalEvent.dataTransfer.files);f.dragDrop.drop!=null&&typeof f.dragDrop.drop=="function"?f.dragDrop.drop(n.originalEvent.dataTransfer.files,n,o,e,s):null},_dragLeaveCheck:function(t){var i=n(t.currentTarget),r=0;return!i.is(o)&&(r=o.find(i).length,r>0)?!1:!0}},_clipboardPaste:function(n,t){var i,e,r,f;if((t||n.originalEvent.clipboardData||n.originalEvent.clipboardData.items)&&(!t||n.originalEvent.dataTransfer||n.originalEvent.dataTransfer.items)&&!u._clPsePre&&(i=t?n.originalEvent.dataTransfer.items:n.originalEvent.clipboardData.items,e=function(n,t,i){var e,o,r,f,s,u,h;for(t=t||"",i=i||512,e=atob(n),o=[],r=0;r<e.length;r+=i){for(f=e.slice(r,r+i),s=new Array(f.length),u=0;u<f.length;u++)s[u]=f.charCodeAt(u);h=new Uint8Array(s);o.push(h)}return new Blob(o,{type:t})},i))for(r=0;r<i.length;r++)if(i[r].type.indexOf("image")!==-1||i[r].type.indexOf("text/uri-list")!==-1){if(t)try{window.atob(n.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1])}catch(n){return}f=t?e(n.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1],"image/png"):i[r].getAsFile();f.name=Math.random().toString(36).substring(5);f.name+=f.type.indexOf("/")!=-1?"."+f.type.split("/")[1].toString().toLowerCase():".png";u._onChange(n,[f]);u._clPsePre=setTimeout(function(){delete u._clPsePre},1e3)}},_onSelect:function(t){f.uploadFile&&!n.isEmptyObject(f.uploadFile)&&(!f.uploadFile.synchron||f.uploadFile.synchron&&n.grep(u._itFl,function(n){return n.ajax}).length==0)&&u._upload(u._itFc.id);u.files[t]._pendRemove&&(u._itFc.html.hide(),u._remove(null,{binded:!0,data:{id:u._itFc.id}}));f.onSelect!=null&&typeof f.onSelect=="function"?f.onSelect(u.files[t],u._itFc.html,h,s,o,e):null;t+1>=u.files.length&&(f.afterShow!=null&&typeof f.afterShow=="function"?f.afterShow(h,s,o,e):null)},_onChange:function(t,i){if(i){if(!i||i.length==0)return u._set("input",""),u._clear(),!1;u.files=i}else{if(!e.get(0).files||typeof e.get(0).files=="undefined"||e.get(0).files.length==0)return f.uploadFile||f.addMore||(u._set("input",""),u._clear()),!1;u.files=e.get(0).files}if(f.uploadFile||f.addMore||u._reset(!0),e.prop("jFiler").files=u.files,!u._filesCheck()||(f.beforeSelect!=null&&typeof f.beforeSelect=="function"?!f.beforeSelect(u.files,h,s,o,e):!1))return u._set("input",""),u._clear(),f.addMore&&c.length>0&&(u._unbindInput(!0),c[c.length-1].remove(),c.splice(c.length-1,1),e=c.length>0?c[c.length-1]:n(r),u._bindInput()),!1;if(u._set("feedback",u.files.length+u._itFl.length+" "+f.captions.feedback2),f.showThumbs)u._thumbCreator._box();else for(var l=0;l<u.files.length;l++)u.files[l]._choosed=!0,u._addToMemory(l),u._onSelect(l)},_append:function(n,t){var r=t?t.files:!1,i;if(r&&!(r.length<=0)&&(u.files=r,e.prop("jFiler").files=u.files,f.showThumbs)){for(i=0;i<u.files.length;i++)u.files[i]._appended=!0;u._thumbCreator._box()}},_getList:function(n,t){var r=t?t.files:!1,c,i;if(r&&!(r.length<=0)&&(u.files=r,e.prop("jFiler").files=u.files,f.showThumbs)){for(c=[],i=0;i<u.files.length;i++)u.files[i].forList=!0,c.push(u._thumbCreator.create(i));t.callback&&t.callback(c,h,s,o,e)}},_retryUpload:function(t,i){var o=parseInt(typeof i=="object"?i.attr("data-jfiler-index"):i),r=u._itFl.filter(function(n){return n.id==o});if(r.length>0){if(f.uploadFile&&!n.isEmptyObject(f.uploadFile)&&!r[0].uploaded)return u._itFc=r[0],e.prop("jFiler").current_file=u._itFc,u._upload(o),!0}else return!1},_remove:function(t,r){var l;if(r.binded){if(typeof r.data.id!="undefined"&&(r=h.find(f.templates._selectors.item+"[data-jfiler-index='"+r.data.id+"']"),r.length==0))return!1;r.data.el&&(r=r.data.el)}var v=function(t){var r=s.find("input[name^='jfiler-items-exclude-']:hidden").first();r.length==0&&(r=n('<input type="hidden" name="jfiler-items-exclude-'+(f.excludeName?f.excludeName:(e.attr("name").slice(-2)!="[]"?e.attr("name"):e.attr("name").substring(0,e.attr("name").length-2))+"-"+i)+'">'),r.appendTo(s));t&&n.isArray(t)&&(t=JSON.stringify(t),r.val(t))},a=function(t,i){var e=u._itFl[i],s=[],o,r;if(e.file._choosed||e.file._appended||e.uploaded)for(u._itFr.push(e),o=u._itFl.filter(function(n){return n.file.name==e.file.name}),r=0;r<u._itFr.length;r++)f.addMore&&u._itFr[r]==e&&o.length>0&&(u._itFr[r].remove_name=o.indexOf(e)+"://"+u._itFr[r].file.name),s.push(u._itFr[r].remove_name?u._itFr[r].remove_name:u._itFr[r].file.name);v(s);u._itFl.splice(i,1);u._itFl.length<1?(u._reset(),u._clear()):u._set("feedback",u._itFl.length+" "+f.captions.feedback2);t.fadeOut("fast",function(){n(this).remove()})},y=r.get(0).jfiler_id||r.attr("data-jfiler-index"),c=null;for(l in u._itFl)l!=="length"&&u._itFl.hasOwnProperty(l)&&u._itFl[l].id==y&&(c=l);if(!u._itFl.hasOwnProperty(c))return!1;if(u._itFl[c].ajax){u._itFl[c].ajax.abort();a(r,c);return}(f.onRemove!=null&&typeof f.onRemove=="function"?f.onRemove(r,u._itFl[c].file,c,h,s,o,e)!==!1:!0)&&a(r,c)},_addToMemory:function(t){u._itFl.push({id:u._itFl.length,file:u.files[t],html:n(),ajax:!1,uploaded:!1});(f.addMore||u.files[t]._appended)&&(u._itFl[u._itFl.length-1].input=e);u._itFc=u._itFl[u._itFl.length-1];e.prop("jFiler").files_list=u._itFl;e.prop("jFiler").current_file=u._itFc},_assets:{bytesToSize:function(n){if(n==0)return"0 Byte";var t=1e3,i=Math.floor(Math.log(n)/Math.log(t));return(n/Math.pow(t,i)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},hasAttr:function(n,t){var t=t?t:e,i=t.attr(n);return i&&typeof i!="undefined"?!0:!1},getIcon:function(t,i){return n.inArray(i,["audio","image","text","video"])>-1?'<i class="icon-jfi-file-'+i+" jfi-file-ext-"+t+'"><\/i>':'<i class="icon-jfi-file-o jfi-file-type-'+i+" jfi-file-ext-"+t+'"><\/i>'},textParse:function(t,i){i=n.extend({},{limit:f.limit,maxSize:f.maxSize,fileMaxSize:f.fileMaxSize,extensions:f.extensions?f.extensions.join(","):null},i&&n.isPlainObject(i)?i:{},f.options);switch(typeof t){case"string":return t.replace(/\{\{fi-(.*?)\}\}/g,function(n,t){return t=t.replace(/ /g,""),t.match(/(.*?)\|limitTo\:(\d+)/)?t.replace(/(.*?)\|limitTo\:(\d+)/,function(n,t,r){var t=i[t]?i[t]:"",u=t.substring(0,r);return t.length>u.length?u.substring(0,u.length-3)+"...":u}):i[t]?i[t]:""});case"function":return t(i);default:return t}},text2Color:function(n){var i,t,r;if(!n||n.length==0)return!1;for(t=0,i=0;t<n.length;i=n.charCodeAt(t++)+((i<<5)-i));for(t=0,r="#";t<3;r+=("00"+(i>>t++*2&255).toString(16)).slice(-2));return r}},files:null,_itFl:[],_itFc:null,_itFr:[],_itPl:[],_ajFc:0};e.on("filer.append",function(n,t){u._append(n,t)}).on("filer.remove",function(n,t){t.binded=!0;u._remove(n,t)}).on("filer.reset",function(){return u._reset(),u._clear(),!0}).on("filer.generateList",function(n,t){return u._getList(n,t)}).on("filer.retry",function(n,t){return u._retryUpload(n,t)});return u.init(),this})};n.fn.filer.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,changeInput:!0,showThumbs:!1,appendTo:null,theme:"default",templates:{box:'<ul class="jFiler-items-list jFiler-items-default"><\/ul>',item:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}<\/div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title" title="{{fi-name}}">{{fi-name | limitTo:30}}<\/div><div class="jFiler-item-others"><span>size: {{fi-size2}}<\/span><span>type: {{fi-extension}}<\/span><span class="jFiler-item-status">{{fi-progressBar}}<\/span><\/div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"><\/a><\/li><\/ul><\/div><\/div><\/div><\/div><\/li>',itemAppend:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}<\/div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title">{{fi-name | limitTo:35}}<\/div><div class="jFiler-item-others"><span>size: {{fi-size2}}<\/span><span>type: {{fi-extension}}<\/span><span class="jFiler-item-status"><\/span><\/div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"><\/a><\/li><\/ul><\/div><\/div><\/div><\/div><\/li>',progressBar:'<div class="bar"><\/div>',itemAppendToEnd:!1,removeConfirmation:!0,canvasImage:!0,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},files:null,uploadFile:null,dragDrop:null,addMore:!1,allowDuplicates:!1,clipBoardPaste:!0,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,onFileCheck:null,afterShow:null,onRemove:null,onEmpty:null,options:null,dialogs:{alert:function(n){return alert(n)},confirm:function(n,t){confirm(n)?t():null}},captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large! Please upload file up to {{fi-fileMaxSize}} MB.",filesSizeAll:"Files you've choosed are too large! Please upload files up to {{fi-maxSize}} MB.",folderUpload:"You are not allowed to upload folders."}}}})(jQuery);
//# sourceMappingURL=jquery.filer.min.js.map
