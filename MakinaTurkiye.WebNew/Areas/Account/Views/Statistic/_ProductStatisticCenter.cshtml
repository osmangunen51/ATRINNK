@model NeoSistem.MakinaTurkiye.Web.Models.Statistics.MTProductStatisticViewModel
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Models
@using NeoSistem.MakinaTurkiye.Web.Models

@using NeoSistem.MakinaTurkiye.Core.Web.Helpers
@using NeoSistem.MakinaTurkiye.Web.Helpers
@using System.Diagnostics
@using NeoSistem.MakinaTurkiye.Web.Models.Home
@using NeoSistem.MakinaTurkiye.Web.Models.MemberShip
@using NeoSistem.MakinaTurkiye.Web.Models.Authentication
@using MakinaTurkiye.Entities.Tables.Members
@using NeoSistem.MakinaTurkiye.Web.Models.ViewModels
@using NeoSistem.MakinaTurkiye.Web.Models.Products
@using NeoSistem.MakinaTurkiye.Web.Models.Catalog
@using NeoSistem.MakinaTurkiye.Web.Models.Entities
@using NeoSistem.MakinaTurkiye.Web.Models.ProductRequests
@using NeoSistem.MakinaTurkiye.Web.Models.Stores
@using NeoSistem.MakinaTurkiye.Core.Web
@using NeoSistem.MakinaTurkiye.Web.Models.StoreNews
@using System.Globalization
@using NeoSistem.MakinaTurkiye.Web.Models.StoreProfiles
@using NeoSistem.MakinaTurkiye.Web.Models.Videos
@using NeoSistem.MakinaTurkiye.Web.Models.Adverts
@using MakinaTurkiye.Entities.Tables.Catalog
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Models.Advert
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Models.FavoriteProducts
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Models.Checkouts
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Models.OtherSettings
@using NeoSistem.MakinaTurkiye.Web.Areas.Account.Constants

@{
    //Layout = "~/Views/Shared/_LayoutAccountMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutMainMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutStoreProfileMaster.cshtml";


}

<div class="col-md-7">
    @Html.Partial("_ProductStatistic", Model.MTStatisticModel)
</div>
<div class="col-md-5" style="margin-top: 10px; margin-bottom: 10px;">
    <div class="">
        <h3>Metric Değerler</h3>
        <div class="col-md-6 number-container" style="">
            <span>Kullanıcılar</span>
            <div class="col-md-12">
                <b>@Model.TotalUserCount</b>
            </div>
        </div>
        <div class="col-md-6  number-container">
            <span>Görütülenme Sayısı</span>
            <div class="col-md-12">
                <b>@Model.TotalViewCount</b>
            </div>
        </div>
        <div class="col-md-12" style="margin-top: 20px;">
            <table class="table table-striped">
                <tr>
                    <th>Ürün Adı</th>
                    <th title="Görüntülenme Sayısı">Görüntülenme S.</th>
                </tr>
                @foreach (var item in Model.ProductItems.OrderByDescending(x => x.ViewCount))
                {
                    string url = "/Account/Statistic/ProductStatistics";
                    if (Request.QueryString["day"] != null)
                    {
                        url = url + "?day=" + Request.QueryString["day"].ToString() + "&ProductId=" + item.ProductId;
                    }
                    else
                    {
                        url = url + "?ProductId=" + item.ProductId;
                    }

    <tr>
        <td><a href="@url">@item.ProductName</a></td>
        <td>@item.ViewCount</td>
    </tr>}
            </table>
        </div>
    </div>
    <div class="col-md-12">
        <h3>Bölgeler</h3>
        <div style="height: 400px;
  overflow: scroll;">


            <table class="table table-striped">
                <tr>
                    <th>Ülke</th>
                    <th>Şehir</th>
                    <th title="Görüntülenme Sayısı">Görüntülenme S.</th>
                </tr>
                @foreach (var item in Model.MTStatisticLocationModels.OrderByDescending(x => x.ViewCount))
                {
    <tr>
        <td>@item.Country</td>
        <td>@item.City</td>
        <td>@item.ViewCount</td>
    </tr>            }
                @if (Model.ProductItems.Count > 20)
                {
    <tr>
        <td colspan="3"><a href="">Tümünü Gör</a></td>
    </tr>}
            </table>
        </div>
    </div>

</div>
