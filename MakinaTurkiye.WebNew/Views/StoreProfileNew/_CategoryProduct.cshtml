@model MTCategoryModel
@using NeoSistem.MakinaTurkiye.Web.Models
@using NeoSistem.MakinaTurkiye.Web.Models.UtilityModel
@using NeoSistem.MakinaTurkiye.Core.Web.Helpers
@using NeoSistem.MakinaTurkiye.Web.Helpers
@using System.Diagnostics
@using NeoSistem.MakinaTurkiye.Web.Models.Home
@using NeoSistem.MakinaTurkiye.Web.Models.MemberShip
@using NeoSistem.MakinaTurkiye.Web.Models.Authentication
@using MakinaTurkiye.Entities.Tables.Members
@using NeoSistem.MakinaTurkiye.Web.Models.ViewModels
@using NeoSistem.MakinaTurkiye.Web.Models.Products
@using NeoSistem.MakinaTurkiye.Web.Models.Catalog
@using NeoSistem.MakinaTurkiye.Web.Models.Entities
@using NeoSistem.MakinaTurkiye.Web.Models.ProductRequests
@using NeoSistem.MakinaTurkiye.Web.Models.Stores
@using NeoSistem.MakinaTurkiye.Core.Web
@using NeoSistem.MakinaTurkiye.Web.Models.StoreNews
@using System.Globalization
@using NeoSistem.MakinaTurkiye.Web.Models.StoreProfiles
@{
    //Layout = "~/Views/Shared/_LayoutAccountMaster.cshtml";
    //Layout = "~/Views/Shared/_LayoutMainMaster.cshtml";

}
@{string display = ""; }
@if (Model.ActiveCategory != null) { display = "display:block; list-style-type:none;"; }
<ul class="sub-menu" style="@display">
    @*<%--Üst Kategoriler--%>*@
    @{int LeftMargin = 0;
    }
    @if (Model.ActiveCategory != null)
    {
        LeftMargin += 10;
        foreach (var item in Model.MTTopCategoryItems.ToList())
        {
            LeftMargin += 10;
            <li class="sub-menu-item">
                <a href="@item.CategoryUrl">
                    @item.CategoryName
                </a>
            </li>
        }
        @*<%--Aktif Kategori--%>*@
        <li class="sub-menu-item">
            <a href="@Request.FilePath?CategoryId=@Model.ActiveCategory.CategoryId">
                @Model.ActiveCategory.CategoryName
            </a>
        </li>
        LeftMargin += 1;

        @*<%--Alt Kategoriler--%>*@

        foreach (var item in Model.MTTopCategoryItems.Where(c => c.CategoryParentId == Model.ActiveCategory.CategoryId && c.CategoryType != (byte)CategoryType.Model).OrderBy(c => c.CategoryName))
        {
            <li class="sub-menu-item">
                &nbsp;&nbsp;&nbsp;<a href="@item.CategoryUrl">
                    @item.CategoryName
                </a>
            </li>
        }

    }
    else
    {
        @*<%--Kategori Yoksa Ürün Grupları Listeleniyor--%>*@
        foreach (var item in Model.MTCategoryItems.Where(c => c.CategoryType == (byte)CategoryType.ProductGroup).OrderBy(c => c.CategoryName))
        {
            <li class="sub-menu-item">
                <a href="@item.CategoryUrl">@item.CategoryName</a>

                @if (Model.MTCategoryItems.Where(x => x.CategoryParentId == item.CategoryId).ToList().Count > 0)
                {
                    <i class="icon-down-arrow menuarrow"></i>
                    <ul class="sub-menu">
                        @foreach (var itemParent in Model.MTCategoryItems.Where(c => c.CategoryParentId == item.CategoryId))
                        {
                            <li class="sub-menu-item">
                                <a href="@itemParent.CategoryUrl">@itemParent.CategoryName</a>
                            </li>

                        }
                    </ul>
                }
            </li>

        }
    }
</ul>


